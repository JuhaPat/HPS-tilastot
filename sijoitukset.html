<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sijoitukset</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .header {
            text-align: center;
        }
        .header a {
            text-decoration: none;
        }
        .header img {
            width: 100px;
            height: auto;
        }
        .header h1 {
            color: rgb(0, 100, 40);
            font-size: 1.5rem;
            margin: 10px 0 0;
        }

        /* Oikean reunan valikkonappi, samalle tasalle taulukon oikean reunan kanssa */
        .menu-button {
            position: absolute;
            top: 10px;
            right: 20%;
            width: 40px;
            height: 40px;
            background-color: rgb(0, 100, 40);
            border: none;
            border-radius: 5px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }
        .menu-button div {
            width: 25px;
            height: 3px;
            background-color: white;
            margin: 3px 0;
        }

        /* Kapea vihreä valikko, vihreä teksti, vihreät reunat, nyt leveys 200px */
        .menu {
            display: none;
            position: absolute;
            top: 55px;
            right: 20%;
            width: 200px;
            background-color: white;
            border: 2px solid rgb(0, 100, 40);
            border-radius: 5px;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
            padding: 5px;
        }
        .menu a {
            display: block;
            color: rgb(0, 100, 40);
            text-decoration: none;
            font-weight: bold;
            border: 1px solid rgb(0, 100, 40);
            border-radius: 3px;
            margin: 2px 0;
            padding: 4px 8px;
            text-align: center;
        }
        .menu a:hover {
            background-color: rgb(0, 100, 40);
            color: white;
        }

        .sijoitus-table {
            width: 60%;
            border-collapse: collapse;
            margin: 20px auto;
        }
        .sijoitus-table th,
        .sijoitus-table td {
            border: 1px solid #ccc;
            padding: 4px;
            text-align: center;
        }
        .sijoitus-table th {
            background-color: #ffffff;
        }
        .sijoitus-table th span {
            display: block;
        }
        .year-cell {
            font-weight: bold;
        }
        .year-cell a {
            color: black;
            text-decoration: none;
        }
        .year-cell a:hover {
            text-decoration: underline;
        }
        .highlight-green {
            background-color: rgb(0, 100, 40);
            color: white;
            font-weight: bold;
        }
        .highlight-gray {
            background-color: lightgray;
        }
        .highlight-red {
            background-color: red;
            color: white;
            font-weight: bold;
        }
        .highlight-gold {
            background-color: #ffd700;
            font-weight: bold;
        }
        .link {
            color: black;
            text-decoration: none;
        }
        .link:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <!-- Vihreä valikkonappi oikeassa reunassa -->
    <button class="menu-button" onclick="toggleMenu()">
        <div></div>
        <div></div>
        <div></div>
    </button>
    <!-- Avautuva valikko -->
    <div class="menu" id="menu">
        <a href="index.html">Etusivu</a>
        <a href="sijoitukset.html">Sijoitukset</a>
        <a href="kaudet.html">Kaudet</a>
        <a href="joukkueet.html">Joukkueet</a>
        <a href="pelaajat.html">Pelaajat</a>
        <a href="vastustajat.html">Vastustajat</a>
        <a href="tilastot.html">Tilastot</a>
    </div>

    <main>
        <div class="header">
            <a href="index.html">
                <img src="logot/HPS.jpg" alt="HPS Logo">
            </a>
            <h1 id="team-title"></h1>
            <h1 id="team-subtitle"></h1>
        </div>

        <script>
            window.onload = function() {
                const urlParams = new URLSearchParams(window.location.search);
                const joukkue = urlParams.get('joukkue') || 'miehet';

                const teamTitle = document.getElementById('team-title');
                const teamSubtitle = document.getElementById('team-subtitle');
                if (joukkue === 'naiset') {
                    teamTitle.textContent = 'Naiset';
                    teamSubtitle.textContent = 'Sarjasijoitukset 1999-2024';
                } else {
                    teamTitle.textContent = 'Miehet';
                    teamSubtitle.textContent = 'Sarjasijoitukset 1918-2024';
                }

                // Päivitetään valikon linkit
                const menuLinks = document.querySelectorAll('.menu a');
                menuLinks.forEach(link => {
                    const linkUrl = new URL(link.href, window.location.origin);
                    linkUrl.searchParams.set('joukkue', joukkue);
                    link.href = linkUrl.toString();
                });
            };

            function toggleMenu() {
                const menu = document.getElementById('menu');
                menu.style.display = (menu.style.display === 'block') ? 'none' : 'block';
            }
        </script>

        <!-- Taulukon yläosan sarjatasojen nimiluettelo (täsmälleen sama kuin alkuperäinen) -->
        <table class="sijoitus-table">
            <thead>
                <tr style="background-color: white;">
                    <th></th>
                    <th class="history-cell">
                        <span>Veikkausliiga 1992-</span>
                        <span>Futisliiga 1990-91</span>
                        <span>SM-sarja 1980-89</span>
                        <span>Mestaruussarja -1979</span>
                    </th>
                    <th class="history-cell">
                        <span>Ykkösliiga 2024-</span>
                        <span>Ykkönen 1994-2023</span>
                        <span>1. divisioona 1973-1993</span>
                        <span>2. divisioona 1970-72</span>
                        <span>Suomensarja -1969</span>
                    </th>
                    <th class="history-cell">
                        <span>Ykkönen 2024-</span>
                        <span>Kakkonen 1994-2023</span>
                        <span>2. divisioona 1973-1993</span>
                        <span>3. divisioona 1970-72</span>
                        <span>Maakuntasarja -1969</span>
                    </th>
                    <th class="history-cell">
                        <span>Kakkonen 2024-</span>
                        <span>Kolmonen 1994-2023</span>
                        <span>3. divisioona 1973-1993</span>
                        <span>4. divisioona 1970-72</span>
                        <span>Aluesarja -1969</span>
                    </th>
                    <th class="history-cell">
                        <span>Kolmonen 2024-</span>
                        <span>Nelonen 1994-2023</span>
                        <span>4. divisioona 1973-1993</span>
                    </th>
                    <th class="history-cell">
                        <span>Nelonen 2024-</span>
                        <span>Vitonen 1994-2023</span>
                        <span>5. divisioona 1978-1993</span>
                    </th>
                    <th class="history-cell">
                        <span>Vitonen 2024-</span>
                        <span>Kutonen 1994-2023</span>
                        <span>6. divisioona 1979-1993</span>
                    </th>
                    <th class="history-cell">
                        <span>Kutonen 2024-</span>
                        <span>Seiska 1994-2023</span>
                        <span>7. divisioona 1987-1993</span>
                    </th>
                </tr>
            </thead>
            <tbody id="table-body">
                <!-- Taulukon sisältö täytetään JavaScriptillä -->
            </tbody>
        </table>
    </main>

    <script>
        const urlParams2 = new URLSearchParams(window.location.search);
        const joukkue = urlParams2.get('joukkue') || 'miehet';

        const dataFolder = (joukkue === 'naiset') ? 'data naiset' : 'data miehet';
        const jsonFile = `${dataFolder}/sijoitukset.json`;

        fetch(jsonFile)
            .then(response => response.json())
            .then(data => {
                const tableBody = document.getElementById('table-body');
                // Poimitaan kaikki vuodet ja lajitellaan laskevasti
                const years = [...new Set(data.map(item => item.Vuosi))].sort((a, b) => b - a);

                years.forEach(year => {
                    const row = document.createElement('tr');
                    // Ensimmäisessä solussa linkki kaudet.html-sivulle
                    row.innerHTML = `<td class="year-cell"><a href="kaudet.html?year=${year}&joukkue=${joukkue}" class="link">${year}</a></td>`;

                    // 8 sarjatasoa, ennallaan
                    for (let i = 1; i <= 8; i++) {
                        const cellData = data.find(item => item.Vuosi === year && item.sarjataso === `${i}. sarjataso`);
                        const cell = document.createElement('td');

                        if (cellData) {
                            cell.innerHTML = `
                                <a href="kaudet.html?year=${year}&joukkue=${joukkue}" class="link">
                                    <img src="logot/HPS.jpg" alt="HPS Logo" style="width: 20px; height: 20px; margin-right: 5px;">
                                    ${cellData.Sijoitus}
                                </a>`;

                            if (cellData.tulos === 'nousi') {
                                cell.className = 'highlight-green';
                            } else if (cellData.tulos === 'säilyi') {
                                cell.className = 'highlight-gray';
                            } else if (cellData.tulos === 'putosi') {
                                cell.className = 'highlight-red';
                            } else if (cellData.tulos === 'mestari') {
                                cell.className = 'highlight-gold';
                            }
                        }
                        row.appendChild(cell);
                    }
                    tableBody.appendChild(row);
                });
            })
            .catch(error => console.error('Virhe ladattaessa JSON-dataa:', error));
    </script>
</body>
</html>
